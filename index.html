<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>掘金</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div class="index-view">
    <div class="loading-bar opacity-fade-transition" style="display:none;">
      <div class="progress"></div>
    </div>
    <ul class="alerts"></ul>
    <div class="main">
      <div class="entry-detail">
        <div class="entry-detail-main-area">
          <i class="ion-ios-close-outline entry-close"></i>
          <div class="entry-detail-container">
            <div class="entry-detail-header background-cover" style="background-image: none;">
              <i class="ion-ios-close-outline entry-close"></i>
              <div class="entry-box">
                <div class="title-box clearfix">
                  <a href="#" class="title">强大的 CSS</a>
                  <div class="tags float-right"></div>
                </div>
                <div class="action-box clearfix">
                  <a href="#" class="button blue original-url-button">阅读全文</a>
                  <button class="entry-collection-button">
                    <i class="collection-arrow-ion ion-arrow-up-b"></i>
                    <span>64</span>
                  </button>
                </div>
              </div>
            </div>
            <div class="entry-detail-body flex">
              <div class="entry-detail-left action">
                <div class="editor">
                  <img src="http://tva3.sinaimg.cn/crop.0.0.1241.1241.180/92633ca2jw8f3bnx444ffj20yi0yhn17.jpg" class="avatar">
                  <div class="editor-meta clearfix">
                    <span class="user-name text-a">小晨欧尼酱</span>
                    <span class="user-job-title"></span>
                    <div class="entry-meta-info">
                      1天前
                      发布·
                      891
                      人阅读
                    </div>
                  </div>
                  <div class="editor-content">
                    <artical>只需要 CSS 不借助 JS 也可以做很多复杂的事情，但是有限制是只适配现代浏览器。</artical>
                  </div>
                  <br>
                </div>
                <div class="comment-box">
                  <div class="new-comment new-comment-card">
                    <img src="http://gold.xitu.io/images/default_avatar.svg" class="avatar">
                    <textarea placeholder="说说你的看法" class="new-comment-input"></textarea>
                    <div class="comment-actions">
                      <button>评论</button>
                    </div>
                  </div>
                </div>
                <ul class="comments" vote-like-history>
                  <li class="comment">
                    <img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHO5sTLEGdPauGibAZJ9HX0mCJodicwdgQRXvCwrNVNbygLJQ5h7a1bl639jbXYNicaw9iceAtFgnLXYg/0" class="avatar">
                    <div class="comment-user-meta">
                      <span class="user-name text-a">旅梦</span>
                      <span class="user-job-title"></span>
                    </div>
                    <div class="comment-content">赞</div>
                    <div class="comment-meta">
                      <div class="comment-like-box action">
                        <i class="ion-arrow-up-b like-icon"></i>
                        <span class="like-count">1</span>
                      </div>
                      <div class="reply action">回复</div>
                      <div class="action">12小时前</div>
                    </div>
                  </li>
                  <li class="comment">
                    <img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHA71OThkdgx3pfglsjLG0yfh2420tJBCBV3zc1OQlia86NJ3tsia8g7bpwic9aR7P9Hmd1Z2JWzdpqQ/0" class="avatar">
                    <div class="comment-user-meta">
                      <span class="user-name text-a">蜗牛先笙</span>
                      <span class="user-job-title"></span>
                    </div>
                    <div class="comment-content">赞</div>
                    <div class="comment-meta">
                      <div class="comment-like-box action">
                        <i class="ion-arrow-up-b like-icon"></i>
                        <span class="like-count">0</span>
                      </div>
                      <div class="reply action">回复</div>
                      <div class="action">12小时前</div>
                    </div>
                  </li>
                  <li class="comment hint" style="display: none;">
                    <i class="ion-load-c spin"></i>
                    <span>加载评论中</span>
                  </li>
                  <li class="comment hint">没有更多评论了</li>
                </ul>
              </div>
              <div class="entry-detail-right">
                <div class="share-box">
                  <div class="sub-title">分享到...</div>
                  <div class="tags cloud">

                  </div>
                </div>
                <div class="tags-box"></div>
                <div class="collection-users">
                  <div class="sub-title">
                    64
                    人收藏了这篇文章
                  </div>
                  <ul class="users-list">
                    <li class="users-list-item">
                      <img src="http://wx.qlogo.cn/mmopen/qKWLW7BIlaMZFJnEZJf31TfV9EledLpu4LfdcIZPzyibr78YuJflSJkWI5wiaTVbZpcxMwyLmfGiaPPmhFemkjf6woTjgjX8ThP/0" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://ac-mhke0kuv.clouddn.com/e44d66dddfc520f2918c.jpg?imageView/2/w/100/h/100/q/80/format/png" alt="" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHA71OThkdgx3pfglsjLG0yfh2420tJBCBV3zc1OQlia86NJ3tsia8g7bpwic9aR7P9Hmd1Z2JWzdpqQ/0" alt="" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://ac-mhke0kuv.clouddn.com/1ca3f0709aa93c78758b.jpg?imageView/1/w/100/h/100/q/80/format/png" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHA71OThkdgx3pfglsjLG0yfh2420tJBCBV3zc1OQlia86NJ3tsia8g7bpwic9aR7P9Hmd1Z2JWzdpqQ/0" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://ac-mhke0kuv.clouddn.com/e44d66dddfc520f2918c.jpg?imageView/2/w/100/h/100/q/80/format/png" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHA71OThkdgx3pfglsjLG0yfh2420tJBCBV3zc1OQlia86NJ3tsia8g7bpwic9aR7P9Hmd1Z2JWzdpqQ/0" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://ac-mhke0kuv.clouddn.com/e44d66dddfc520f2918c.jpg?imageView/2/w/100/h/100/q/80/format/png" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHA71OThkdgx3pfglsjLG0yfh2420tJBCBV3zc1OQlia86NJ3tsia8g7bpwic9aR7P9Hmd1Z2JWzdpqQ/0" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://ac-mhke0kuv.clouddn.com/e44d66dddfc520f2918c.jpg?imageView/2/w/100/h/100/q/80/format/png" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHA71OThkdgx3pfglsjLG0yfh2420tJBCBV3zc1OQlia86NJ3tsia8g7bpwic9aR7P9Hmd1Z2JWzdpqQ/0" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://ac-mhke0kuv.clouddn.com/e44d66dddfc520f2918c.jpg?imageView/2/w/100/h/100/q/80/format/png" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHA71OThkdgx3pfglsjLG0yfh2420tJBCBV3zc1OQlia86NJ3tsia8g7bpwic9aR7P9Hmd1Z2JWzdpqQ/0" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <img src="http://ac-mhke0kuv.clouddn.com/e44d66dddfc520f2918c.jpg?imageView/2/w/100/h/100/q/80/format/png" class="avatar">
                    </li>
                    <li class="users-list-item">
                      <div class="more-users">
                        <i class="ion-more"></i>
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="recommend-box"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="http://cdn.bootcss.com/jquery/1.12.1/jquery.min.js"></script>
  <script>
  // var collectBtn = document.querySelector('.entry-collection-button');
  // var oAlerts = document.querySelector('.alerts');
  // var oLi = document.createElement("li");
  // var text = document.createTextNode("已经收藏了强大的css");
  // var li = document.createElement("li");
  // var oUsers = document.querySelector('.users-list');
  // var num = document.querySelector('.entry-collection-button span');
  // var oNum = parseInt(num.innerHTML);
  // function addAlert(){
  //   oLi.appendChild(text);
  //   oAlerts.appendChild(oLi);
  //   oLi.classList = "alert-content";
  // }
  // function removeAlert(){
  //   oLi.removeChild(text);
  //   oAlerts.removeChild(oLi);
  // }
  //
  // // function addUser(){
  // //   oUsers.appendChild(li);
  // //   li.classList = "users-list-item";
  // //   img.innerHTML = "<img src="http://wx.qlogo.cn/mmopen/qKWLW7BIlaMZFJnEZJf31TfV9EledLpu4LfdcIZPzyibr78YuJflSJkWI5wiaTVbZpcxMwyLmfGiaPPmhFemkjf6woTjgjX8ThP/0" alt="" />";
  // //   li.appendChild("img");
  // // }
  // collectBtn.addEventListener("click",function() {
  //   addAlert();
  //   setTimeout("removeAlert()", 1000)
  // },false)
  //   oNum++;
  //   num.innerHTML = oNum;


  $(function(){
    var collecteNum = $('.entry-collection-button span').html();
    //关闭网页 回到http://gold./xitu.io/
    backHomePage();
    //收藏
    //是否已shou藏
    $('.entry-collection-button').click(function(){
      if($(this).hasClass('collected')) {
        cancelCollect();
        $(this).removeClass('collected');

      } else {
        doCollect();
        $(this).addClass('collected');
      }
    })

    $('.new-comment-input').focus(function() {
      $('.comment-actions button').css('display','block');
    })

    $('.comment-actions button').click(function(){

      $('.comments').prepend($('<li class="comment">'+
                    '<img src="http://wx.qlogo.cn/mmopen/BO1qQiajiacVmOm4ic0iaJhsHO5sTLEGdPauGibAZJ9HX0mCJodicwdgQRXvCwrNVNbygLJQ5h7a1bl639jbXYNicaw9iceAtFgnLXYg/0" class="avatar">'+
                    '<div class="comment-user-meta">'+
                    '<span class="user-name text-a">旅梦</span>'+
                    '<span class="user-job-title"></span></div>'+
                    '<div class="comment-content">'+$('.new-comment-input').val()+'</div>'+
                    '<div class="comment-meta">'+
                    '<div class="comment-like-box action">'+
                    '<i class="ion-arrow-up-b like-icon"></i>'+
                    '<span class="like-count">1</span>'+
                    '</div><div class="reply action">回复</div>'+
                    '<div class="action">12小时前</div></div></li>'));
    })

    $('.more-users').click(function(){
          $.getJSON("/data.json",{},function(data){
            console.log(data);
            for(var i=0;i<data.length;i++){
                var src = data[i].src;
              $('<li class="users-list-item"><img src='+src+' class="avatar"></img>').insertBefore(".users-list .users-list-item:last-child");
            }
          });
          $('.more-users').hide();
        });
    //收藏
    //取消收藏//取消收藏
    function cancelCollect() {
      --collecteNum;
      $('.entry-collection-button span').html(collecteNum);
      $('.collection-users .sub-title').html(collecteNum + "人收藏了这篇文章");

      $('.users-list li:first').remove();
    }

    //收藏
    function doCollect() {
      // i  span 数字加1
      ++collecteNum;
      $('.entry-collection-button span').html(collecteNum);
      $('.collection-users .sub-title').html(collecteNum + "人收藏了这篇文章");
      // 提示动画
      showCollectToast();

      //收藏数量真假
      //往头像区域 插入一个头像为第一个

      addCollectAvatar();

    }

    function backHomePage() {
      $('.entry-close').click(function(){
        window.location.href='http://gold.xitu.io/';
      });
    }
    // 提示动画
    function showCollectToast() {
      // 显示出来
      // 屏幕右侧
      $('.alerts').append($('<li>已经收藏了强大的CSS</li>'));
      //进来动画
      //2秒后fadeout
      $('.alerts li').fadeOut(1500);
    }

    function addCollectAvatar() {
        // $('fdfadsfasf').insertBefore($('<li></li>'));
        $('.users-list').prepend($('<li class="users-list-item"><img src="http://wx.qlogo.cn/mmopen/qKWLW7BIlaMZFJnEZJf31TfV9EledLpu4LfdcIZPzyibr78YuJflSJkWI5wiaTVbZpcxMwyLmfGiaPPmhFemkjf6woTjgjX8ThP/0" class="avatar""></li>'));
    }
  });


  </script>
</body>
</html>
